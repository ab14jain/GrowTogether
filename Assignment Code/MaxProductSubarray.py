class Solution:
	# @param A : tuple of integers
	# @return an integer
	def maxProduct(self, A):

            n = len(A)
            min_arr = [0]*n
            max_arr = [0]*n
            min_arr[0] = A[0]
            max_arr[0] = A[0]     
            max_all_prod = A[0]
            for i in range(1, n): 
                min_arr[i] = min(A[i], A[i]*min_arr[i-1], A[i]*max_arr[i-1])
                max_arr[i] = max(A[i], A[i]*min_arr[i-1], A[i]*max_arr[i-1])
                max_all_prod = max(max_all_prod, max_arr[i])

            # print(min_arr)
            # print(max_arr)
            return max_all_prod


s=Solution()
print(s.maxProduct([4,2,-5,1]))
print(s.maxProduct([-3,0,-5,0]))
print(s.maxProduct([-1,0,-3,-2]))
print(s.maxProduct([0,0,-2,0,1,0,0,0,-1,0,0,0,0,0,0,0,1,0,0,0,0,0,-3,0,0,0,0,0,0,0,0,-1,0,0,0,0,2,-3,0,0,0,0,-1,0,0,0,0,0,0,0,0,1,0,0,0,-3,
                     -1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,0,0,0,0,0,0,0,0,0,0,-2,1,0,0,0,0,0,0,0,0,2,0,0,0,0,0,1,0,0,-3,0,-3,0,0,0,0,0,
                     0,0,0,0,0,0,3,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-2,0,0,0,3,0,0,0,0,0,0,0,0,0,0,
                     0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-3,0,0,-1,0,2,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,-2,0,0,0,0,0,0,0,0,0,-1,0,-3,-2,0,
                     0,0,0,0,0,0,0,0,0,0,0,-2,0,0,-2,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,3,1,0,0,0,
                     0,3,0,0,0,0,1,0,-2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-2,0,0,0,0,0,0,0,0,1,0,0,-3,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
                     0,0,0,0,2,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,-2,0,0,0,0,0,0,0,0,-1,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,0,2,0,0,0,0,0,-1,
                     0,0,0,1,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,-2,0,-1,0,0,-2,0,0,0,0,0,0,0,
                     0,0,-1,0,0,0,0,0,0,0,0,0,1,0,-2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,3,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,
                     0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,
                     0,0,0,0,-3,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,-2,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,0,0,0,0,0]))
                  